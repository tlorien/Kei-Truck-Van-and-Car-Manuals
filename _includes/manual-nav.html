{% assign manual_pages = site.pages | where: "layout", "manual" %}

<!-- 1️⃣ Filter Pages by Brand, Model, Year, Chassis -->
{% assign filtered_pages = manual_pages | where: "brand", page.brand | where: "model", page.model | where: "year", page.year | where: "chassis", page.chassis %}

<!-- 2️⃣ Sort Pages by Title or Another Property -->
{% assign sorted_pages = filtered_pages | sort: "title" %}

<!-- 3️⃣ Find Current Page Index -->
{% assign current_index = -1 %}
{% for p in sorted_pages %}
  {% if p.url == page.url %}
    {% assign current_index = forloop.index0 %}
  {% endif %}
{% endfor %}

<!-- 4️⃣ Navigation UI -->
<div class="manual-navigation">
  {% if current_index > 0 %}
    {% assign prev_page = sorted_pages[current_index | minus: 1] %}
    <a href="{{ prev_page.url | relative_url }}" class="prev">&larr; Previous: {{ prev_page.title }}</a>
  {% endif %}

  {% if current_index < sorted_pages.size | minus: 1 %}
    {% assign next_page = sorted_pages[current_index | plus: 1] %}
    <a href="{{ next_page.url | relative_url }}" class="next">Next: {{ next_page.title }} &rarr;</a>
  {% endif %}
</div>
